<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Regular Expressions</title>
  <script src="jquery.js"></script>
</head>
<body>

  <input id="str"> String<br>
  <input id="exp"> Regexp<br>
  <input id="res" value="holas" disabled> Resultado<br>
  <button onclick="postToAuto()">Probar</button>

</body>
<script type="text/javascript">

  var State = function (ch) {
    this.ch = ch; //String
    this.out = null; //Node
  }
  State.prototype = new Array();

  function postToAuto (str) {
    str = $('#exp').val();

    var stack = [];

    var pop = function () {return stack.pop();};
    var push = function (val) {stack.push(val);};

    var before = function (val) {
      return stack[stack.length - (val || 1)]
    }

    for (var i = 0; i < str.length; i++) {
      var ch = str[i];
      switch (ch) {
        case '.':
          var e2 = pop();
          var e1 = pop();
          e1.push(e2);
          push(e1);
          push(e2);
          break;
        case '|':
          var e2 = pop();
          var e1 = pop();
          var s = new State(ch);
          s.push(e1);
          s.push(e2);
          push(s);
          break;
        default:
          var s = new State(ch);
          break;
      }
    }

    console.log(stack);
  }

</script>
</html>